# üìä –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è WHOOP-–ø–æ–¥–æ–±–Ω–æ–≥–æ —Ñ–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–∫–µ—Ä–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-01-XX  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫](#–∞–ª–≥–æ—Ä–∏—Ç–º—ã-—Ä–∞—Å—á–µ—Ç–∞-–º–µ—Ç—Ä–∏–∫)
3. [BLE –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö](#ble-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-–∏-–æ–±—Ä–∞–±–æ—Ç–∫–∞-–¥–∞–Ω–Ω—ã—Ö)
4. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)
5. [–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend](#—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è-—Å-backend)
6. [GPS —Ç—Ä–µ–∫–∏–Ω–≥](#gps-—Ç—Ä–µ–∫–∏–Ω–≥)
7. [–î–µ—Ç–µ–∫—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Å–Ω–∞](#–¥–µ—Ç–µ–∫—Ü–∏—è-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏-–∏-—Å–Ω–∞)
8. [–†–∞—Å—á–µ—Ç –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞](#—Ä–∞—Å—á–µ—Ç-–±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ-–≤–æ–∑—Ä–∞—Å—Ç–∞)

---

## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    UI Layer (Flutter)                     ‚îÇ
‚îÇ  HomeScreen | HealthScreen | RecoveryScreen | etc.        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           HealthDataProvider (State Management)          ‚îÇ
‚îÇ  ‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                      ‚îÇ
‚îÇ  ‚Ä¢ –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI                              ‚îÇ
‚îÇ  ‚Ä¢ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ BLE Health Service‚îÇ        ‚îÇ Algorithm Service       ‚îÇ
‚îÇ ‚Ä¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ     ‚îÇ        ‚îÇ ‚Ä¢ Recovery Score        ‚îÇ
‚îÇ ‚Ä¢ –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö   ‚îÇ        ‚îÇ ‚Ä¢ Strain Score          ‚îÇ
‚îÇ ‚Ä¢ R-R intervals   ‚îÇ        ‚îÇ ‚Ä¢ Sleep Analysis        ‚îÇ
‚îÇ ‚Ä¢ HR, SpO2, Temp  ‚îÇ        ‚îÇ ‚Ä¢ Stress Level          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ ‚Ä¢ Calories              ‚îÇ
                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                         ‚îÇ
                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                              ‚îÇ   Backend API            ‚îÇ
                              ‚îÇ ‚Ä¢ PostgreSQL             ‚îÇ
                              ‚îÇ ‚Ä¢ REST endpoints         ‚îÇ
                              ‚îÇ ‚Ä¢ Daily summaries        ‚îÇ
                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üßÆ –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫

### 1. Recovery Score (0-100)

**–§–∞–π–ª:** `health_algorithm_service.dart:128-164`

**–§–æ—Ä–º—É–ª–∞:**
```
Recovery = Base(50) 
         + HRV Component (35%)
         + Resting HR Component (25%)
         + Sleep Component (25%)
         - Strain Penalty (15%)
```

**–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è:**

1. **HRV Component (35% –≤–µ—Å–∞)**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è RMSSD –∏–∑ R-R intervals
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å baseline HRV –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –§–æ—Ä–º—É–ª–∞: `hrvScore = 50 + (hrvRatio - 1) * 50`
   - `hrvRatio = currentHRV / baselineHRV`
   - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ: `score = score * 0.65 + hrvScore * 0.35`

2. **Resting HR Component (25% –≤–µ—Å–∞)**
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ resting HR —Å baseline
   - –§–æ—Ä–º—É–ª–∞: `hrScore = 50 + (hrRatio - 1) * 100`
   - `hrRatio = baselineRestingHR / currentRestingHR`
   - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ: `score = score * 0.75 + hrScore * 0.25`

3. **Sleep Component (25% –≤–µ—Å–∞)**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Sleep Score –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ —Å–Ω–∞
   - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ: `score = score * 0.75 + sleepScore * 0.25`

4. **Strain Penalty (15% –≤–ª–∏—è–Ω–∏–µ)**
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å strain > 15
   - –§–æ—Ä–º—É–ª–∞: `penalty = (previousDayStrain - 15) * 3`
   - –í—ã—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ score

**Recovery Zones:**
- üü¢ Green: ‚â• 67
- üü° Yellow: 34-66
- üî¥ Red: < 34

---

### 2. Strain Score (0.0 - 21.0)

**–§–∞–π–ª:** `health_algorithm_service.dart:176-196`

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
- –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ HR –∑–æ–Ω–∞—Ö
- –ö–∞–∂–¥–æ–µ HR reading –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–∫–ª–∞–¥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–æ–Ω—ã

**Strain Contribution –ø–æ –∑–æ–Ω–∞–º:**
```
Rest:       0.00  (–Ω–µ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏)
Warmup:     0.02  (—Ä–∞–∑–º–∏–Ω–∫–∞)
FatBurn:    0.08  (–∂–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏–µ)
Cardio:     0.25  (–∫–∞—Ä–¥–∏–æ)
Peak:       0.70  (–ø–∏–∫–æ–≤–∞—è)
MaxEffort:  1.50  (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è)
```

**–§–æ—Ä–º—É–ª–∞:**
```
strainScore = (accumulatedStrain / 100).clamp(0.0, 21.0)
```

**Activity Strain (–¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏):**
- –ë–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ % –æ—Ç maxHR
- –ú–Ω–æ–∂–∏—Ç–µ–ª—å –ø–æ —Ç–∏–ø—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (Running: 1.2x, Cycling: 1.1x, etc.)
- –£—á–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

### 3. HRV Calculation (RMSSD, pNN50)

**–§–∞–π–ª:** `ble_health_service.dart:700+`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ú–∏–Ω–∏–º—É–º 10-20 R-R intervals –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 60+ intervals –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏

**–ú–µ—Ç–æ–¥—ã:**

1. **RMSSD (Root Mean Square of Successive Differences)**
   ```dart
   sumSquaredDiffs = Œ£(rr[i] - rr[i-1])¬≤
   rmssd = ‚àö(sumSquaredDiffs / (n-1))
   ```

2. **pNN50 (Percentage of intervals differing by >50ms)**
   ```dart
   nn50 = count where |rr[i] - rr[i-1]| > 50ms
   pnn50 = (nn50 / (n-1)) * 100
   ```

**HRV Score (0-100 –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è):**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è baseline HRV –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –§–æ—Ä–º—É–ª–∞: `score = (currentHRV / baselineHRV) * 50`
- –î–∏–∞–ø–∞–∑–æ–Ω: 0-100 (50 = baseline, >50 = –ª—É—á—à–µ, <50 = —Ö—É–∂–µ)

---

### 4. Sleep Analysis

**–§–∞–π–ª:** `health_algorithm_service.dart:244-417`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **Sleep Stage Detection (5-–º–∏–Ω—É—Ç–Ω—ã–µ –æ–∫–Ω–∞)**
   - **Awake**: HR > avgHR + 10 bpm –ò–õ–ò variability > 8
   - **Deep**: HR < avgHR * 0.92 –ò variability < 3
   - **REM**: HR ‚âà avgHR (0.98-1.08) –ò variability > 4
   - **Light**: –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏

2. **Sleep Performance Score (0-100)**
   ```
   Performance = Hours Score (40%)
               + Efficiency Score (25%)
               + Restorative Ratio (25%)
               + Wake Events Score (10%)
   ```
   
   - **Hours Score**: `(hoursSlept / hoursNeeded).clamp(0, 1.2) * 100`
   - **Efficiency**: `(actualSleep / totalTime) * 100`
   - **Restorative Ratio**: `(deep + rem) / actualSleep * 200`
   - **Wake Events Penalty**: `max(0, 100 - wakeEvents * 10)`

3. **Sleep Detection (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è)**
   - –ù–∞—á–∞–ª–æ: HR < restingHR * 1.1 –≤ —Ç–µ—á–µ–Ω–∏–µ 20+ –º–∏–Ω—É—Ç
   - –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ: HR > restingHR + 20 –≤ —Ç–µ—á–µ–Ω–∏–µ 10+ –º–∏–Ω—É—Ç

---

### 5. Stress Level (0-100)

**–§–∞–π–ª:** `health_algorithm_service.dart:460-496`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **HRV-based Stress (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–∫—Ç–æ—Ä)**
   - –ù–∏–∑–∫–∏–π HRV = –≤—ã—Å–æ–∫–∏–π —Å—Ç—Ä–µ—Å—Å
   - `hrvRatio < 0.7`: +30 –∫ stress score
   - `hrvRatio < 0.9`: +15 –∫ stress score
   - `hrvRatio > 1.1`: -15 –∫ stress score
   - `pNN50 < 10`: +10 (–≤—ã—Å–æ–∫–∏–π —Å—Ç—Ä–µ—Å—Å)
   - `pNN50 > 30`: -10 (–Ω–∏–∑–∫–∏–π —Å—Ç—Ä–µ—Å—Å)

2. **HR Elevation Factor**
   - `(currentHR - restingHR) / restingHR > 0.3`: +20
   - `> 0.15`: +10

**–ë–∞–∑–æ–≤—ã–π score:** 50 (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π)

---

### 6. Calories Calculation

**–§–∞–π–ª:** `health_algorithm_service.dart:504-532`

**–§–æ—Ä–º—É–ª–∞ (Keytel et al. –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è):**

**–î–ª—è –º—É–∂—á–∏–Ω:**
```
calories/min = (-55.0969 + 0.6309*HR + 0.1988*weight + 0.2017*age) / 4.184
```

**–î–ª—è –∂–µ–Ω—â–∏–Ω:**
```
calories/min = (-20.4022 + 0.4472*HR - 0.1263*weight + 0.074*age) / 4.184
```

**–†–∞—Å—á–µ—Ç:**
- BMR (Basal Metabolic Rate) - –±–∞–∑–æ–≤—ã–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º
- Active Calories - –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –∑–∞ –¥–µ–Ω—å –Ω–∞ –æ—Å–Ω–æ–≤–µ HR
- Total = BMR + Active Calories

---

## üì° BLE –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–§–∞–π–ª:** `ble_health_service.dart:191-200`

- ‚úÖ Huawei / Honor Band
- ‚úÖ Xiaomi Mi Band
- ‚úÖ Fitbit
- ‚úÖ Garmin
- ‚úÖ Samsung
- ‚úÖ Generic BLE fitness devices

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ BLE —Å–µ—Ä–≤–∏—Å—ã

1. **Heart Rate Service (0x180D)**
   - Heart Rate Measurement (0x2A37)
   - Body Sensor Location (0x2A38)
   - R-R Intervals (–≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ HR measurement)

2. **Battery Service (0x180F)**
   - Battery Level (0x2A19)

3. **Pulse Oximeter Service (0x1822)**
   - SpO2 Spot Check (0x2A5E)
   - SpO2 Continuous (0x2A5F)

4. **Health Thermometer (0x1809)**
   - Temperature Measurement (0x2A1C)

### –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö (Streams)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ Streams:**
- `heartRateStream` - —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è HR
- `spo2Stream` - —É—Ä–æ–≤–µ–Ω—å –∫–∏—Å–ª–æ—Ä–æ–¥–∞
- `temperatureStream` - —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç–µ–ª–∞
- `stepsStream` - —à–∞–≥–∏
- `activityStream` - —Ç–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `accelerometerStream` - –¥–∞–Ω–Ω—ã–µ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞
- `respiratoryStream` - —á–∞—Å—Ç–æ—Ç–∞ –¥—ã—Ö–∞–Ω–∏—è

### –û–±—Ä–∞–±–æ—Ç–∫–∞ R-R Intervals

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è HRV:**
- –ú–∏–Ω–∏–º—É–º 10 intervals –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 20-60 intervals –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
- –ë—É—Ñ–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 intervals

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
1. –ü–∞—Ä—Å–∏–Ω–≥ –∏–∑ Heart Rate Measurement characteristic
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `_rrIntervals` –±—É—Ñ–µ—Ä
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç HRV –ø—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö

---

## üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### HealthDataProvider

**–§–∞–π–ª:** `health_data_provider.dart`

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ BLE —Å–µ—Ä–≤–∏—Å—É
   - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

2. **–†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
   - `notifyListeners()` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–µ—Ç—Ä–∏–∫
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —á–µ—Ä–µ–∑ Provider

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ó–∞–≥—Ä—É–∑–∫–∞ daily summaries –∏–∑ backend
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ sleep sessions

4. **–ú–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
   - `currentHR`, `currentHRV`, `currentSpO2`
   - `recoveryScore`, `strainScore`, `sleepScore`
   - `currentStressLevel`

### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

- **Metrics Sync**: –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç ‚Üí backend
- **Daily Reset**: –≤ –ø–æ–ª–Ω–æ—á—å ‚Üí —Å–±—Ä–æ—Å –¥–Ω–µ–≤–Ω—ã—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤
- **HRV Calculation**: –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º R-R interval
- **Recovery Update**: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ HRV –∏–ª–∏ Sleep

---

## üíæ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend

### HealthMetricsService

**–§–∞–π–ª:** `health_metrics_service.dart`

**Endpoints:**

1. **POST /metrics**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –§–æ—Ä–º–∞—Ç: `{ metricType, timestamp, value, metadata }`

2. **GET /metrics**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `metricType`, `startDate`, `endDate`, `limit`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –º–∞—Å—Å–∏–≤ –º–µ—Ç—Ä–∏–∫

3. **GET /metrics/daily-summary**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω—ã—Ö —Å–≤–æ–¥–æ–∫
   - –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –¥–µ–Ω—å

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ DailySummary:**
```dart
{
  date: DateTime,
  recoveryScore: int (0-100),
  strainScore: double (0-21),
  sleepScore: int? (0-100),
  avgHR: int,
  restingHR: int,
  avgHRV: double,
  steps: int,
  distance: double,
  calories: double,
  activeCalories: double,
  activeMinutes: int,
  floors: int,
  avgSpO2: double?,
  avgTemperature: double?,
  avgRespiratoryRate: double?,
  avgStress: int?
}
```

**–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∞–∂–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏ (silent fail, retry later)

---

## üó∫Ô∏è GPS —Ç—Ä–µ–∫–∏–Ω–≥

### GpsLocationService

**–§–∞–π–ª:** `gps_location_service.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

1. **–¢—Ä–µ–∫–∏–Ω–≥ –º–∞—Ä—à—Ä—É—Ç–∞**
   - –ó–∞–ø–∏—Å—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –†–∞—Å—á–µ—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏
   - –†–∞—Å—á–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –≤—ã—Å–æ—Ç—ã

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Strain**
   - GPS-based strain –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Ç—Ä–µ–∫–∏–Ω–≥–µ
   - –ò–∑–±–µ–∂–∞–Ω–∏–µ –¥–≤–æ–π–Ω–æ–≥–æ –ø–æ–¥—Å—á–µ—Ç–∞ (GPS strain –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç HR strain)

3. **–ú–µ—Ç—Ä–∏–∫–∏:**
   - `gpsDistance` - –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–∫–º)
   - `gpsSpeed` - —Ç–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (–∫–º/—á)
   - `gpsElevation` - –≤—ã—Å–æ—Ç–∞ –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è (–º)

4. **–ö–∞—Ä—Ç–∞**
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
   - –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
   - –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–∫–æ–≤

---

## üèÉ –î–µ—Ç–µ–∫—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Å–Ω–∞

### Activity Detection

**–§–∞–π–ª:** `health_algorithm_service.dart:536-568`

**–ú–µ—Ç–æ–¥:** –ê–Ω–∞–ª–∏–∑ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –†–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–π magnitude –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 readings
2. –†–∞—Å—á–µ—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏ (variation) –º–µ–∂–¥—É readings
3. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:
   - **Stationary**: magnitude < 0.3, variation < 0.1
   - **Walking**: magnitude < 1.5, variation < 0.5
   - **Running**: magnitude < 3.0, variation > 0.5
   - **Workout**: variation > 1.0
   - **Unknown**: –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏

**–¢–∏–ø—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
- Stationary, Walking, Running, Cycling, Swimming
- Workout, Yoga, Unknown

### Sleep Detection

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è:**
- –ù–∞—á–∞–ª–æ: HR < restingHR * 1.1 –≤ —Ç–µ—á–µ–Ω–∏–µ 20+ –º–∏–Ω—É—Ç
- –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ: HR > restingHR + 20 –≤ —Ç–µ—á–µ–Ω–∏–µ 10+ –º–∏–Ω—É—Ç
- Callback: `onSleepSessionComplete(bedTime, wakeTime)`

**–ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ `analyzeSleep()`
- –†–∞—Å—á–µ—Ç sleep stages, performance, efficiency
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `_sleepHistory`

---

## üéÇ –†–∞—Å—á–µ—Ç –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞

### AgeCalculationService

**–§–∞–π–ª:** `age_calculation_service.dart`

**–§–∞–∫—Ç–æ—Ä—ã (–≤–µ—Å–∞):**

1. **HRV Factor (30%)**
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–º–∏ –Ω–æ—Ä–º–∞–º–∏
   - `hrvAge = calculateHRVAge(currentHRV, chronologicalAge)`
   - `biologicalAge = chronologicalAge * 0.7 + hrvAge * 0.3`

2. **Resting HR Factor (20%)**
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –Ω–æ—Ä–º–∞–º–∏ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É
   - `rhrAge = calculateRestingHRAge(restingHR, chronologicalAge)`
   - `biologicalAge = biologicalAge * 0.8 + rhrAge * 0.2`

3. **Recovery Score Factor (20%)**
   - –í—ã—Å–æ–∫–∏–π recovery = –º–æ–ª–æ–∂–µ –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –≤–æ–∑—Ä–∞—Å—Ç
   - `recoveryAge = calculateRecoveryAge(recoveryScore, chronologicalAge)`
   - `biologicalAge = biologicalAge * 0.8 + recoveryAge * 0.2`

4. **Sleep Quality Factor (15%)**
   - –ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –≤–æ–∑—Ä–∞—Å—Ç
   - –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ä–µ–¥–Ω–∏–π sleep score –∑–∞ –Ω–µ–¥–µ–ª—é

5. **BMI Factor (10%)**
   - –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π BMI = –º–æ–ª–æ–∂–µ –≤–æ–∑—Ä–∞—Å—Ç
   - –í—ã—Å–æ–∫–∏–π/–Ω–∏–∑–∫–∏–π BMI = —Å—Ç–∞—Ä—à–µ –≤–æ–∑—Ä–∞—Å—Ç

6. **Activity Factor (5%)**
   - –°—Ä–µ–¥–Ω–∏–µ —à–∞–≥–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
   - –ë–æ–ª—å—à–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ = –º–æ–ª–æ–∂–µ –≤–æ–∑—Ä–∞—Å—Ç

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ú–∏–Ω–∏–º—É–º 7 –¥–Ω–µ–π –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
- HRV –¥–∞–Ω–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã

---

## üìä –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ç—Ä–µ–Ω–¥—ã

### Daily History

**–ó–∞–≥—Ä—É–∑–∫–∞:**
- `loadDailyHistory({days: 7})` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –¥–Ω–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `_dailyHistory` —Å–ø–∏—Å–∫–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- Trend View —ç–∫—Ä–∞–Ω—ã (Week, Month, 6 Months)
- –ì—Ä–∞—Ñ–∏–∫–∏ Recovery, Strain, HRV, Sleep
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥

### Weekly Stats

**–†–∞—Å—á–µ—Ç:**
- –°—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞ –Ω–µ–¥–µ–ª—é
- –°—É–º–º–∞—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (steps, calories, activeMinutes)
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏–∑ DailySummary –∑–∞–ø–∏—Å–µ–π

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

1. **BLE Connection Errors**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

2. **Backend Sync Errors**
   - Silent fail —Å retry –ø–æ–∑–∂–µ
   - –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏

3. **Data Validation**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∑–Ω–∞—á–µ–Ω–∏–π
   - Clamping –∫ –¥–æ–ø—É—Å—Ç–∏–º—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ null/undefined –∑–Ω–∞—á–µ–Ω–∏–π

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- –ù–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- [x] Recovery Score —Ä–∞—Å—á–µ—Ç (HRV + Resting HR + Sleep + Strain penalty)
- [x] Strain Score –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ (HR zones based)
- [x] HRV —Ä–∞—Å—á–µ—Ç (RMSSD, pNN50)
- [x] Sleep Analysis (stages detection, performance score)
- [x] Stress Level (HRV + HR elevation based)
- [x] Calories Calculation (Keytel formula)
- [x] Activity Detection (accelerometer based)
- [x] Sleep Detection (HR pattern based)
- [x] GPS Tracking (distance, speed, elevation)
- [x] Biological Age Calculation
- [x] BLE Integration (multiple device support)
- [x] Backend Sync (REST API)
- [x] Historical Data (daily summaries, trends)
- [x] Real-time Updates (Streams, Provider)
- [x] HRV Score Normalization (0-100 scale)

### ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- [ ] Mi Band 4 –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç proprietary –ø—Ä–æ—Ç–æ–∫–æ–ª)
- [ ] Battery level –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç BLE capabilities)
- [ ] Historical data sync –ø—Ä–∏ —Ä–∞–∑—Ä—è–¥–µ –±–∞—Ç–∞—Ä–µ–∏ (—Ç—Ä–µ–±—É–µ—Ç backend persistence)

### üìù –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –±—É–¥—É—â–µ–≥–æ

1. **–ê–ª–≥–æ—Ä–∏—Ç–º—ã:**
   - –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è sleep stages (EEG-like patterns)
   - Machine learning –¥–ª—è activity detection
   - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ baseline adjustments

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
   - Offline mode —Å –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
   - Cloud backup/restore

3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
   - Predictive recovery recommendations
   - Strain optimization suggestions
   - Sleep coaching based on patterns

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **Stream-based Updates**
   - –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ UI

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ historical data
   - Batch sync —Å backend (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

3. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã**
   - –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–Ω–µ –ø–µ—Ä–µ—Å—á–µ—Ç –≤—Å–µ–≥–æ)
   - –û–∫–Ω–∞ –¥–ª—è sleep stage detection (5 –º–∏–Ω—É—Ç)
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –±—É—Ñ–µ—Ä—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 readings)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã

1. **Unit Tests:**
   - Recovery Score calculation —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - Strain Score –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ
   - HRV calculation accuracy
   - Sleep stage detection logic

2. **Integration Tests:**
   - BLE connection flow
   - Backend sync flow
   - GPS tracking accuracy

3. **Manual Tests:**
   - –†–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å —Ñ–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç–æ–º
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ sleep analysis –ø–æ—Å–ª–µ –Ω–æ—á–∏

---

## üìö –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–∞ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –∑–¥–æ—Ä–æ–≤—å—è –≤ —Å—Ç–∏–ª–µ WHOOP:

- ‚úÖ **7 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤** (Recovery, Strain, HRV, Sleep, Stress, Calories, Age)
- ‚úÖ **BLE –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ **Backend —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** —á–µ—Ä–µ–∑ Streams –∏ Provider
- ‚úÖ **GPS —Ç—Ä–µ–∫–∏–Ω–≥** –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è** –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Å–Ω–∞

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ñ–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç–∞–º–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç–æ—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—É—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤.

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-XX
